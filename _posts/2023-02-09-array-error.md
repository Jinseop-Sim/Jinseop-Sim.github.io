---
layout: post
title: "DB의 배열 처리는 어떻게 해야 할까?"
categories: ToyProject
tags: [develop]
author:
  - Jinseop Sim
---
프로젝트를 진행하면서 좋아요 기능을 내가 맡게 되었다.  
내 생각에는 아래의 그림과 같이 Entity에 선언을 하면 될 것이라 생각했다.  
[사진 첨부]

```OnetoMany``` 단방향으로 설계한 이유는 아래와 같다.  
- User가 게시글에 좋아요를 누르고 자신의 배열에 기록한다.
- 하지만 게시글이 User를 참조해야하는 기능은 설계 대상에 없다.
  - 좋아요를 누른 User를 확인하는 기능(X) 
- 따라서 User만 좋아요를 누른 글의 기록을 들고 있으면 된다.

하지만 아래와 같은 문제가 발생했다.  
[사진 첨부]

사진에서 확인할 수 있듯이, 두 배열이 같은 배열 취급이 되고 있다.  
잠시 곰곰히 생각을 해보니 정말 기초적이고 바보같은 오류가 있었다.  
```OneToMany```와 ```JoinColumn``` Annotation으로 일단 관계를 지었으나,  
```JoinColumn```과 배열의 타입이 아예 일치함을 알 수 있다.  
내 생각엔, 그로 인해 내가 선언한 두 배열을 구분을 할 수 없는 것 같다.  

연관 관계는 Column 명을 보고 FK를 통해 맺어지게 된다.  
내가 사용한 FK는 