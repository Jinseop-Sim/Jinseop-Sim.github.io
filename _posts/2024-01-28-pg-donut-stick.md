---
layout: post
title: "프로그래머스 Level 2 - 도넛과 막대 그래프"
categories: Programmers
tags: [cpp]
author:
  - Jinseop Sim
---
- [도넛과 막대 그래프[LEVEL 2]](https://school.programmers.co.kr/learn/courses/30/lessons/258711)  

이번 문제는 프로그래머스의 레벨 2 문제, 도넛... 문제이다.  
이 문제는 카카오 2024 인턴십 코딩테스트 문제였다.  
그 때 당시에는 이렇게 저렇게 풀다 결국 못 푼 문제였다.  

그래프의 간선들이 주어지고, 그래프의 형태를 판단하는 문제다.  
최대 정점의 수가 주어지지 않기 때문에, 최대 정점을 구해야 한다.  
그래프가 아닌 생성된 정점을 찾고, 각 그래프의 수를 구해야 한다!  

### 생성된 정점
생성된 정점이란 주어진 모양의 그래프를 제외한,  
나머지 그래프들을 모두 연결하고 있는 하나의 정점을 의미한다.  
해당 정점을 구하는 것도 답에 포함되니, 어떻게 구할 수 있을까?  

이는 굉장히 간단하다.  
문제의 그래프를 잠깐 살펴보기만 해도 알 수 있다.  

![image](https://github.com/Jinseop-Sim/Jinseop-Sim.github.io/assets/71700079/509acd72-714a-4141-a05d-ea5a6ec8ca96)  

이 정점은 그래프의 일부가 아니니, 들어오는 간선이 없다.  
즉, 진출차수(outdegree)만 존재하고 진입차수(indegree)가 없다.  

그래프 내에도 그런 정점이 있을 수 있지 않을까?  
물론 막대 그래프 같은 경우에, 시작 노드가 동일한 특성을 갖는다.  
하지만 해당 정점은 진출차수가 1이라는 점이 다르다.  

이 문제는 그래프의 수의 합이 2 이상이라는 전제 조건이 주어졌다.  
따라서 생성된 정점은 진출차수가 2 이상일 수 밖에 없다!  

### DFS
생성된 정점을 구했으니, 이제 그래프를 어떻게 판단할지가 문제이다.  
각 그래프의 특징을 잘 한 번 생각해보면, 아래와 같은 특징을 갖는다.  

- 막대 그래프
  - 사이클이 존재하지 않는다.
  - 즉, 시작 노드가 다시 등장하지 않는다.
- 도넛 그래프
  - 사이클이 존재하므로, 시작 노드가 다시 등장한다.
  - 단, 시작 노드는 항상 마지막에 다시 등장한다.
- 8자 그래프
  - 사이클이 존재하므로, 시작 노드가 다시 등장한다.
  - 단, 시작 노드는 그래프 탐색 중간에 다시 등장한다.
 
위와 같은 특징을 검사하기 위해, 그래프를 탐색했다.  
생성된 정점을 그래프에서 삭제한 뒤, DFS로 탐색하려 했다.  
하지만 문제는 그래프를 어떤 방식으로 탐색할 지가 문제였다.  

나는 인접리스트 형식으로 아래와 같이 그래프를 생성했다.  
{% highlight cpp %}
vector<int> graph[1000001];
int last_node = 0;
for (int i = 0; i < edges.size(); i++) {
	int from = edges[i][0];
	int to = edges[i][1];
	last_node = max(max(last_node, from), to);

	graph[from].push_back(to);
	node_checker[from].first++; // 나가는 거
	node_checker[to].second++; // 들어오는 거
}
{% endhighlight %}  

그래서 처음에는 1부터 ```last_node```까지 모두 훑으며 탐색하려 했다.  
그랬더니 막대 그래프를 탐색할 때 문제가 발생했다.  

예를 들어 ```4-2-3-5```와 같은 막대 그래프가 존재한다고 가정해보자.  
그런데 나는 1부터 끝까지 탐색을 하니, ```2```번 노드로 먼저 진입할 것이다.  
그럼 ```2-3-5```는 훑고 방문처리가 되고, 막대 그래프의 수가 + 1 될 것이다.  

여기서 이제 4번 노드를 탐색을 하게 된다면 어떻게 될까?  
사실 노드 1개만 있는 경우도 막대 그래프이므로, 막대 그래프 수 + 1이 되어 버린다.  
하나의 막대 그래프인데, 두 개로 인지해버려 답이 틀리게 되는 것이다.  
이렇게 그래프를 탐색하는 것은 옳지 않은 방식인 것 같다.  

