---
layout: post
title: "백준 9470 - Strahler 순서"
categories: Baekjoon
tags: [cpp]
author:
  - Jinseop Sim
---
> [백준 9470 - Strahler 순서](https://www.acmicpc.net/problem/9470)

이번 문제는 백준 골드 3 Strahler 순서 문제이다.  
문제 이름이 엄청 특이한데, 실제로 사용되는 개념이라고 한다.  
문제를 한 번 차근차근 이해해보자.  

강의 근원으로부터 물이 흘러 내려오는데, 각 정점에 값이 매겨진다.  
이전 정점에 매겨진 값에 따라 현재 정점의 값이 정해지는데,  
이전 정점이 하나라면 ```그 값```을 그대로 물려받는다.  
여러개라면, 그 중 ```가장 큰 값```을 그대로 물려받는다.  
만약 큰 값이 여러개라면, ```가장 큰 값 + 1```을 물려받게 된다.  

노드는 최대 1000개 까지 입력으로 주어진다.  
주어지는 노드의 수는 그렇게 많지 않은 것 같다.  
과연 어떻게 각 정점들을 모두 훑으며 값을 매길 수 있을까?  
우선은 그래프이기 때문에, 가장 먼저 떠오르는 것은 BFS, DFS이다.  

하지만 부모 정점의 모두의 값에 따라 현재 노드가 결정되기 때문에,  
DFS를 사용하기엔 힘들 것 같으니 우선 BFS로 한 번 생각해보자.  

### BFS?
BFS를 이용해서 그래프를 옆으로 훑도록 한다.  
대신 부모 정점에서 자식 정점으로 내려갈 때 값을 부여하며 내려가보자.  

처음 간선 입력을 받을 때, 도착지에 없는 정점들은 강의 근원이 된다.  
강의 근원을 찾아 1점을 먼저 부여한 다음 아래로 탐색을 진행해보자.  
만약 자식 정점이 0점이라면, 자신의 점수를 일단 그냥 부여하도록 하고,  
0이 아니라면, 자식 정점에 저장된 값과 자신의 값 중 더 큰 값을 부여한다.  

근데 이 부분에서 지금 논리는 문제가 발생한다.  
가장 큰 값인 부모 정점이 여러개면, 가장 큰 값 + 1을 자식 노드에 저장하는데,  
그 로직은 그 때 그 때 저장을 하는 방법으로는 구현 방법이 생각나지 않는다.  

### 위상 정렬!
골머리를 앓다가 결국 다른 사람들의 풀이를 보기로 했다...  
사실 이 문제를 푸는 확실한 정답은 위상 정렬이라고 한다.  

위상 정렬을 통해서 각 정점을 시작점부터 순서대로 방문한다.  
단, 부모 정점을 저장하며 나아가서 부모 정점 점수의 최대 값을 저장한다.  
그래야 자식 정점의 점수를 조건에 맞게 계산할 수가 있다.  
자식 정점의 점수 계산 부분이 가장 머리 아팠던 부분인데, 해결이 됐다.  
