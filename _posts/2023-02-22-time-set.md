---
layout: post
title: "서버, DB와 Spring Project의 시간 설정"
categories: ToyProject
tags: [develop]
author:
  - Jinseop Sim
---
현재 진행 중인 프로젝트의 로그인 기능은 토큰을 사용한다.  
해당 토큰은 만료일이 존재하기 때문에 시간 관리가 굉장히 중요한데,  
시간이 맞지 않으면, 토큰이 항상 만료 상태일 위험이 있기 때문이다.  

처음에 RDS와 EC2 Server는 시간이 ```UTC```로 되어 있어서,  
Amazon에서 직접 Parameter group을 설정해서 시간을 맞추고  
터미널에서도 EC2에 SSH Protocol로 접속을 해서 서버 시간을 맞추었다.  
기본 시간이 ```UTC```이기 때문에 모두 ```Asia/Seoul``` 로 맞추었는데,  
__문제는 Spring Project 단에서의 시간이었다.__  

분명 DB에서 ```select now()```도 해보고 서버 시간을 확인해봐도,  
모두 ```Asia/Seoul```로 현재 우리나라의 시간과 동일하게 출력 됐다.  
[사진 첨부]

하지만, 아래 생성된 토큰의 만료 일자를 확인해보면 9시간 차이가 남을 알 수 있다.  
``UTC``` 세계시는 우리나라 보다 9시간 빠른 시간이므로, ```UTC``` 임을 알 수 있다.  
[사진 첨부]  

RDS와 EC2는 모두 설정을 해놓았으니, 의심해볼 것은 Spring Project 뿐이다.  
조금 찾아보니, ```@PostConstruct```를 통해 ```Timezone```을 설정하는 방법이 있다고 한다.  
해당 방법을 적용해 아래와 같이 코드를 작성했다.  

하지만 결과는 실패. 아직 시간이 제대로 바뀌지 않았다.  

아래와 같이 로그를 찍어보니, Spring Project도 ```Asia/Seoul``` 시간인 듯 하다.  
그럼 도대체 뭐가 문제라서 결과 시간은 ```UTC``로 뜨는 것일까?  
그래서 Postman의 Response Header를 한번 살펴보았다.  