---
layout: post
title: "다대다 관계와 객체의 삭제에 관하여"
categories: ToyProject
tags: [develop]
author:
  - Jinseop Sim
---
프로젝트가 거의 마무리를 지어가나 싶더니 문제가 발생했다.  
회원 탈퇴 기능을 개발할 때에 발생한 문제이다.  

아래와 같이 연관관계가 있는 Attribute들에 대해서 Option을 걸었다.  
```CASCADE```와 ```orphanRemoval```을 통해 연관 객체를 모두 관리할 계획이었다.  
하지만, 이 부분에서 문제가 발생했다.  

일반적으로 그냥 내가 쓴 글 정도는 회원 탈퇴가 잘 수행되었다.  
회원 객체와 함께 연관된 글도 모두 삭제되었다.  
하지만 문제는 다대다 관계에서 발생했다.  

현재 프로젝트에서는 __찜__ 기능과 __참여__ 기능이 다대다 관계이다.  
다대다 관계를 교차 엔티티를 통해 해소를 해놓은 상태인데,  
해당 객체가 지워지지 않으니 아래와 같은 문제가 발생했다.  